// -----------------------------------------------------------------
//	CONTRACT: TheTaleofLegrasse - The University of Kambridge - The University of Kambridge - Discover the locations of the secret sites
//	Author: Caerfinon 
//	Credits:
//			- ColdJ - for the creation of the Kraken idol model 
// -----------------------------------------------------------------
CONTRACT_TYPE
{
//CONTRACT DESCRIPTION
	sortKey = TCOK02
	name = TCOK02-TheTaleofLegrasse
	title = The Tale of Legrasse
	group = The University of Kambridge
	agent = The University of Kambridge
	description = Professor Legrasse Kerman wants you to use all available resources to assist in finding out if the Kerthulhu legend is real or not. The univestity will pay well for any discoveries 
	genericDescription = Find the six locations related to the Kerthulhu legend
	synopsis = Find the sites, report the sites, see where they lead.
	notes = The locations could be anywhere on Kerbin. You will need to scan for anomalies and then investigate them 
	completedMessage = You have discovered all the locations and the information has lead to the discovey of a previously unknown site. The next step is to go there and see if the legends are true. 

//Contract Limits
	maxCompletions = 1
	maxSimultaneous = 1
	autoAccept = false
	declinable = true
	cancellable = true
	minExpiry = 0.0
	maxExpiry = 0.0
	deadline = 0

//Contract Reward Modifiers
	prestige = Trivial
	targetBody = Kerbin
	
//Contract Rewards
	advanceFunds = (@/rewardFunds * 0.25 )
	rewardFunds = 100000
	rewardReputation = 15
	rewardScience = 100

//Contract Penalties
	failureFunds = (@/rewardFunds * 1.15) * Random(1.0, 1.25)
	failureReputation = 10
	
// -----------------------------------------------------------------	
// REQUIREMENTS FOR CONTRACT TO APPEAR
// -----------------------------------------------------------------	
//
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		title =  The Horror in Clay
		contractType = TCOK01-TheHorrorinClay
		minCount = 1
	}

// -----------------------------------------------------------------	
//DATA NODES TO PROCESS FOR CONTRACT USE
// -----------------------------------------------------------------


// -----------------------------------------------------------------
//BEHAVIOURS TO DO WHEN CREATING CONTRACT
// -----------------------------------------------------------------
//
	
// Locations to search for
					 
	BEHAVIOUR
	{
		name = WaypointGenerator
		type = WaypointGenerator
		
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(0)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/University
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(0)
			longitude = @TCOK:siteLON.ElementAt(0)
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(1)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/cultist
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(1)
			longitude = @TCOK:siteLON.ElementAt(1)
			parameter = ShowSite1
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(2)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/cultist
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(2)
			longitude = @TCOK:siteLON.ElementAt(2)
			parameter = ShowSite2
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(3)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/cultist
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(3)
			longitude = @TCOK:siteLON.ElementAt(3)
			parameter = ShowSite3
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(4)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/cultist
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(4)
			longitude = @TCOK:siteLON.ElementAt(4)
			parameter = ShowSite4
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(5)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/Airport
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(5)
			longitude = @TCOK:siteLON.ElementAt(5)
			parameter = ShowSite5
		}
		WAYPOINT
		{
			name = @TCOK:siteFullName.ElementAt(6)
			icon = ContractPacks/KerbinSideRemasteredGAP/Assets/Icons/cultist
			altitude = 0
			latitude = @TCOK:siteLAT.ElementAt(6)
			longitude = @TCOK:siteLON.ElementAt(6)
			parameter = ShowSite6
		}
	} 	

//------------------------------------------------------------------------
// Site related dialoga	
//------------------------------------------------------------------------
// Site1 	
	BEHAVIOUR
	{
		name = DialogBox
		type = DialogBox

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

// Site2 	

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

// Site3 	
		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

// Site4 	
		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}
		
// Site5 	
		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}
	
// Site6

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = VisitSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}

		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = NearSite1
			
			position = CENTER
			
			TEXT
			{
				text = dialog
				fontSize = 20
				textColor = #BADA55
			}
			
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}
	

//------------------------------------------------------------------------
// Mission completed dialog	
//------------------------------------------------------------------------		
		DIALOG_BOX
		{
			condition = PARAMETER_COMPLETED
			parameter = MissionAccomplished
			
			position = CENTER	

			TEXT
			{
				text = Absolutely brilliant work!    
				textColor = #BADA55
			}
			IMAGE
			{
				url = ContractPacks/TheCallofKerthulhu/Assets/Characters/Legrasse
				characterName = Professor Legrasse Kerman
			}
		}
	}


// -----------------------------------------------------------------
//PARAMETERS FOR CONTRACT COMPLETION
// -----------------------------------------------------------------

//Site1
	PARAMETER
	{
		name = NearSite1
		type = VisitWaypoint
		index = 1
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite1
		type = VisitWaypoint
		index = 1
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite1
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(1) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt() &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite1

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}

//Site2
	PARAMETER
	{
		name = NearSite2
		type = VisitWaypoint
		index = 2
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite2
		type = VisitWaypoint
		index = 2
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite2
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(2) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt(2) &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite2

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}
	
//Site3
	PARAMETER
	{
		name = NearSite3
		type = VisitWaypoint
		index = 3
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite3
		type = VisitWaypoint
		index = 3
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite3
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(2) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt(2) &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite3

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}
	
//Site4
	PARAMETER
	{
		name = NearSite4
		type = VisitWaypoint
		index = 4
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite4
		type = VisitWaypoint
		index = 4
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite4
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(2) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt(2) &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite4

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}

//Site5
	PARAMETER
	{
		name = NearSite5
		type = VisitWaypoint
		index = 5
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite5
		type = VisitWaypoint
		index = 5
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite5
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(2) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt(2) &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite5

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}
	
//Site6
	PARAMETER
	{
		name = NearSite6
		type = VisitWaypoint
		index = 6
		distance = 25000
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}
	PARAMETER
	{
		name = VisitSite6
		type = VisitWaypoint
		index = 6
		distance = 50
		hideOnCompletion = false
		disableOnStateChange = true
		hideChildren = true
		hidden = true
	}

	PARAMETER
	{
		name = ReportSite6
		type = All
		Title = Report your discovery of @TCOK:siteName.ElementAt(6) to @TCOK:siteName.ElementAt(0)
		rewardScience = 50.0
		rewardReputation = 10.0
		rewardFunds = 20000.0
		completedMessage = Well done!&br;&br;You have discovered the secrets of @TCOK:siteFullName.ElementAt(6) &br;&br;The search continues!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 60s
			preWaitText = Admire what you've discovered
			waitingText = Admiring discovery ETA:
			completionText = Now get back to work
			startCriteria = PARAMETER_COMPLETION
			parameter = VisitSite6

		}
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 50
			hideOnCompletion = false
			disableOnStateChange = true
			hideChildren = true
			hidden = true
		}
	}
	
	PARAMETER
	{
		name = MissionAccomplished
		type = All
		Title = By Jove! You've Done it!
		
		PARAMETER
		{
			name = Duration
			type = Duration
			duration = 120s
			preWaitText = Pat yourself on your back
			waitingText = Back patting and celebratory drinking ETA:
			completionText = Now the real work starts
			startCriteria = PARAMETER_COMPLETION
			parameter = ReportSite1
			parameter = ReportSite2
			parameter = ReportSite3
			parameter = ReportSite4
			parameter = ReportSite5
			parameter = ReportSite6
		}
	}
	

// -----------------------------------------------------------------
// END OF CONTRACT
// -----------------------------------------------------------------
}



	



	